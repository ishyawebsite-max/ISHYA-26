<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>ISHYA '26 | FLAMES IN EVERY FOLD</title>

    <!-- FONTS -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link href="https://fonts.googleapis.com/css2?family=Foldit:wght@400;600;800;900&family=Syncopate:wght@400;700&family=Space+Grotesk:wght@300;500;700&family=Cormorant+Garamond:ital,wght@1,300;1,600&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <!-- FONT AWESOME -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/all.min.css">

<style>
    :root {
        /* --- COLORS --- */
        --bg-dark: #051408;       
        --accent-gold: #D6C26A;   
        --accent-olive: #6B7540;  
        --accent-green: #4D8F48;  
        --text-light: #e0e0e0;
        
        /* FONTS */
        --font-display: 'Syncopate', sans-serif;
        --font-fold: 'Foldit', display;
        --font-body: 'Space Grotesk', sans-serif;
        --font-tech: 'Share Tech Mono', monospace;
        --font-serif: 'Cormorant Garamond', serif;
    }

    * { margin: 0; padding: 0; box-sizing: border-box; -webkit-font-smoothing: antialiased; }
    
    html, body { 
        background: transparent; 
        color: var(--text-light); 
        font-family: var(--font-body); 
        overflow-x: hidden; 
        width: 100vw; 
        min-height: 100vh;
    }

    /* --- LAYERS --- */
    #animated-bg { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -10; background-color: var(--bg-dark); pointer-events: none; }
    #webgl { position: fixed; top: 0; left: 0; width: 100%; height: 100%; z-index: -1; pointer-events: none; }
    #bg-overlay { position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: radial-gradient(circle at center, transparent 0%, rgba(5, 20, 8, 0.85) 100%); z-index: -5; pointer-events: none; }

    main { position: relative; z-index: 10; will-change: opacity; opacity: 0; /* JS will reveal */ }
    
    /* --- UTILITIES & GLASSMORPHISM --- */
    section { min-height: 100vh; padding: 0 5vw; position: relative; display: flex; align-items: center; justify-content: center; }
    
    .glass-panel {
        background: rgba(24, 28, 16, 0.4) !important;
        backdrop-filter: blur(15px);
        -webkit-backdrop-filter: blur(15px);
        border: 1px solid rgba(214, 194, 106, 0.2);
        box-shadow: 0 10px 30px rgba(0,0,0,0.5), inset 0 0 20px rgba(77, 143, 72, 0.1);
    }

    .section-layout { width: 100%; max-width: 1600px; display: flex; align-items: center; justify-content: space-between; }
    
    .perch-title { 
        font-family: var(--font-fold); font-size: clamp(3rem, 6vw, 5rem); 
        color: var(--accent-gold); opacity: 0.9; text-shadow: 0 0 20px rgba(0,0,0,0.8); 
        line-height: 1; margin-bottom: 10px;
    }
    .perch-subtitle { 
        font-family: var(--font-tech); font-size: 1rem; color: var(--accent-green); 
        letter-spacing: 2px; padding: 5px 10px; display: inline-block; 
        background: rgba(0,0,0,0.5); border: 1px solid var(--accent-olive); 
    }
    
    .cta-btn { 
        display: inline-block; margin-top: 30px; padding: 15px 40px; 
        background: rgba(24, 28, 16, 0.6); border: 1px solid var(--accent-green); 
        color: var(--accent-gold); font-family: var(--font-display); 
        font-size: 0.8rem; text-transform: uppercase; letter-spacing: 2px; 
        cursor: pointer; transition: all 0.3s ease; text-decoration: none; position: relative; overflow: hidden; 
    }
    .cta-btn:hover { color: #fff; border-color: var(--accent-gold); box-shadow: 0 0 20px rgba(77, 143, 72, 0.4); background: rgba(77, 143, 72, 0.2); }

    /* --- HERO --- */
    #hero { 
        flex-direction: column; 
        text-align: center; 
        padding-top: 85vh; 
        padding-bottom: 10vh; 
    }
    .hero-content { pointer-events: none; width: 100%; position: relative; z-index: 20; }
    
    .hero-title { 
        perspective: 1000px; font-family: var(--font-fold); 
        font-size: clamp(3rem, 7vw, 8rem); line-height: 1.1; text-transform: uppercase; 
        background: linear-gradient(to bottom, #ffffff 10%, #D6C26A 60%, #8a7c40 100%);
        -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        filter: drop-shadow(0 0 25px rgba(214, 194, 106, 0.4));
        margin-bottom: 1vh; font-weight: 900; 
        width: 100%;
        max-width: 95vw;
        margin-left: auto; margin-right: auto;
    }
    .word-group { display: inline-block; white-space: nowrap; margin: 0 15px; }
    .hero-title .letter { display: inline-block; transform-style: preserve-3d; opacity: 0; }
    
    .hero-date { 
        perspective: 1000px; 
        font-family: var(--font-fold); 
        font-weight: 900; 
        font-size: clamp(1.8rem, 5vw, 4rem); 
        color: var(--accent-gold); 
        letter-spacing: 5px; 
        text-transform: uppercase; 
        margin-top: 2vh; 
        text-shadow: 4px 4px 0px #3e2b18;
    }
    .hero-date .date-char { display: inline-block; transform-style: preserve-3d; opacity: 0; }
    
    .hero-countdown { display: flex; justify-content: center; gap: 15px; margin-top: 40px; font-family: var(--font-tech); color: var(--accent-green); opacity: 0; flex-wrap: wrap; }
    .time-block { 
        display: flex; flex-direction: column; align-items: center; padding: 15px 20px; 
        border-radius: 8px; min-width: 80px; 
    }
    .time-block span { font-size: clamp(2rem, 5vw, 3rem); line-height: 1; text-shadow: 0 0 10px rgba(77, 143, 72, 0.6); }

    /* --- SECTIONS LAYOUT --- */
    .layout-content-right { flex-direction: row; }
    .layout-content-right .perch-zone { width: 40%; text-align: left; padding-right: 50px; }
    .layout-content-right .content-zone { width: 60%; }
    .layout-content-left { flex-direction: row-reverse; }
    .layout-content-left .perch-zone { width: 40%; text-align: right; padding-left: 50px; }
    .layout-content-left .content-zone { width: 60%; }

    /* SECTION 1: ABOUT */
    .chat-question { 
        align-self: flex-start; 
        color: var(--accent-gold); padding: 20px 40px; font-family: var(--font-display); 
        font-size: 1.2rem; border-radius: 30px 30px 30px 0; 
        transform: translateY(20px); margin-bottom: 20px; 
    }
    
    .origami-sheet { 
        background-color: #f4e4bc;
        background-image: url('https://www.transparenttextures.com/patterns/crumpled-paper.png');
        color: #3e2b18; 
        padding: 60px; 
        border-radius: 2px; 
        box-shadow: 0 20px 60px rgba(0,0,0,0.8), inset 0 0 80px rgba(139, 90, 43, 0.1); 
        border: none;
        position: relative;
        transform-origin: top center; 
        perspective: 1000px;
        will-change: transform;
        opacity: 0; 
    }
    
    .origami-sheet::before { content: ''; position: absolute; top: 0; left: 0; width: 100%; height: 4px; background: rgba(0,0,0,0.1); }

    .sheet-content h3 { font-family: var(--font-display); font-size: 2rem; margin-bottom: 25px; color: #8b5a2b; border-bottom: 2px solid #8b5a2b; padding-bottom: 10px; display: inline-block; }
    .sheet-content p { font-size: 1.15rem; line-height: 1.7; margin-bottom: 15px; font-family: var(--font-serif); font-weight: 500; }

    /* SECTION 2: MEMORIES - CORRECTED IMPLEMENTATION */
    #memories .perch-title {
        font-family: var(--font-display);
        font-weight: 700;
        color: var(--text-light);
        opacity: 0.9;
        text-shadow: 0 4px 15px rgba(0,0,0,0.5);
    }
    #memories .perch-subtitle {
        background: rgba(0,0,0,0.3);
        border: 1px solid var(--accent-olive);
        color: var(--text-light);
    }
    .image-marquee-container { 
        width: 100%; 
        padding: 30px 0; 
        overflow: hidden; 
        transform: rotate(-2deg) scale(1.05); 
    }
    .image-marquee-track { 
        display: flex; 
        gap: 20px; 
        width: max-content; 
        animation: scrollImages 80s linear infinite; 
    }
    .image-marquee-item { 
        width: 400px; 
        height: 260px; 
        border-radius: 8px; 
        overflow: hidden; 
        border: 1px solid rgba(255,255,255,0.2); 
        filter: grayscale(100%); 
        transition: 0.4s; 
    }
    .image-marquee-item:hover { 
        filter: grayscale(0%); 
        transform: scale(1.03); 
        border-color: var(--accent-gold); 
        box-shadow: 0 10px 30px rgba(0,0,0,0.5); 
    }
    .image-marquee-item img { 
        width: 100%; 
        height: 100%; 
        object-fit: cover; 
    }
    @keyframes scrollImages { 
        0% { transform: translateX(0); } 
        100% { transform: translateX(calc(-420px * 10)); } /* Adjusted count */
    }

    /* --- SECTION 3: EVENTS --- */
    .events-3d-section { flex-direction: column; overflow: hidden; position: relative; padding-top: 5vh; padding-bottom: 5vh; justify-content: flex-start; }
    .events-header { padding: 0 5vw; margin-bottom: 20px; width: 100%; display: flex; justify-content: space-between; align-items: flex-end; z-index: 5; }
    .carousel-stage { 
        width: 100%; height: 600px; position: relative; 
        display: flex; justify-content: center; align-items: center; 
        perspective: 1200px; margin-top: 20px;
        perspective-origin: center; 
    }
    .carousel-container { width: 100%; height: 100%; position: relative; transform-style: preserve-3d; display: flex; justify-content: center; align-items: center; }

    .carousel-card-3d {
        position: absolute; 
        width: 320px; height: 500px;
        background: #000; border-radius: 12px;
        border: 1px solid rgba(255, 255, 255, 0.1);
        transform-origin: center center; 
        left: 0; right: 0; margin: auto;
        overflow: hidden; cursor: pointer;
        box-shadow: 0 15px 40px rgba(0,0,0,0.8);
        transition: border-color 0.3s, box-shadow 0.3s;
    }
    .carousel-card-3d::after { content: ''; position: absolute; inset: 0; background: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(5,20,8,0.95) 100%); z-index: 2; pointer-events: none; }
    .carousel-card-3d:hover { border-color: var(--accent-gold); }
    .card-bg-img { width: 100%; height: 100%; object-fit: cover; filter: grayscale(100%); transition: filter 0.5s; position: absolute; top: 0; left: 0; z-index: 1; }
    .carousel-card-3d.active-card .card-bg-img { filter: grayscale(0%); }
    .card-content { position: absolute; z-index: 3; padding: 25px; width: 100%; height: 100%; display: flex; flex-direction: column; justify-content: space-between; pointer-events: none; }
    .card-number { font-family: var(--font-serif); font-style: italic; font-weight: 300; font-size: 5rem; color: rgba(255,255,255,0.9); line-height: 0.8; margin-left: -5px; }
    .card-details { transform: translateY(20px); opacity: 0; transition: all 0.4s ease 0.2s; }
    .carousel-card-3d.active-card .card-details { transform: translateY(0); opacity: 1; }
    .card-cat { font-family: var(--font-tech); color: var(--accent-gold); font-size: 0.9rem; letter-spacing: 2px; margin-bottom: 8px; text-transform: uppercase; }
    .card-title { font-family: var(--font-display); font-size: 2rem; color: #fff; line-height: 1; margin-bottom: 5px; text-shadow: 0 2px 10px rgba(0,0,0,0.8); }
    .card-arrow-icon { position: absolute; top: 25px; right: 25px; color: #fff; font-size: 1.2rem; opacity: 0.7; transform: rotate(45deg); }
    .carousel-nav { display: flex; gap: 15px; }
    .nav-btn { width: 50px; height: 50px; border-radius: 50%; border: 1px solid var(--accent-olive); background: rgba(24, 28, 16, 0.6); color: var(--text-light); cursor: pointer; transition: 0.3s; display: flex; align-items: center; justify-content: center; backdrop-filter: blur(5px); }

    /* SECTION 4: TEAM */
    .team-content-wrapper { padding: 50px 70px; display: block; text-align: center; position: relative; overflow: hidden; opacity: 0; }
    .team-text { font-family: var(--font-serif); font-size: 1.3rem; line-height: 1.6; color: #ddd; }
    .team-text p { margin-bottom: 20px; }
    .team-highlight { color: var(--accent-gold); font-style: italic; font-weight: 600; }

    /* SECTION 5: PROSHOWS */
    .proshow-container { display: flex; justify-content: center; align-items: center; width: 100%; }
    .wait-see-wrapper { text-align: center; padding: 50px; border: 1px solid var(--accent-gold); background: rgba(0,0,0,0.3); backdrop-filter: blur(5px); transform: skewX(-10deg); }
    .wait-see-text { font-family: var(--font-display); font-size: clamp(3rem, 8vw, 7rem); font-weight: 700; color: transparent; -webkit-text-stroke: 2px var(--accent-gold); text-shadow: 0 0 30px rgba(214, 194, 106, 0.3); transform: skewX(10deg); animation: pulseText 3s infinite ease-in-out; }
    @keyframes pulseText { 0%, 100% { opacity: 0.6; text-shadow: 0 0 10px rgba(214, 194, 106, 0.1); } 50% { opacity: 1; text-shadow: 0 0 50px rgba(214, 194, 106, 0.6), 0 0 20px #fff; } }

    /* --- FOOTER --- */
    .footer-section { 
        background: rgba(24, 28, 16, 0.95); 
        border-radius: 50px 50px 0 0; 
        padding: 60px 5vw 30px; 
        text-align: center; 
        border-top: 1px solid var(--accent-olive); 
        backdrop-filter: blur(10px); 
        margin-top: 10vh; 
    }
    .footer-logo { font-family: var(--font-fold); font-size: 10vw; color: transparent; -webkit-text-stroke: 1px #444; line-height: 0.8; opacity: 0.6; transition: 0.5s; display: block; margin-bottom: 40px; }
    .footer-logo:hover { color: var(--accent-olive); opacity: 1; text-shadow: 0 0 30px var(--accent-green); }

    .footer-grid {
        display: grid;
        grid-template-columns: 1.2fr 1fr 1.5fr; 
        gap: 30px;
        max-width: 1400px;
        margin: 0 auto;
        text-align: left;
        border-top: 1px solid rgba(255,255,255,0.1);
        padding-top: 40px;
        align-items: start;
    }

    .footer-col h4 { color: var(--accent-gold); font-family: var(--font-tech); font-size: 1.1rem; margin-bottom: 15px; letter-spacing: 1px; }
    .footer-col p, .footer-col a { font-family: var(--font-body); font-size: 0.95rem; color: #bbb; line-height: 1.6; text-decoration: none; display: block; transition: 0.3s; }
    .footer-col a:hover { color: var(--accent-gold); }

    .social-icons-footer { display: flex; gap: 20px; flex-wrap: wrap; margin-top: 15px; }
    .social-icons-footer a { 
        color: #888; transition: 0.3s; font-size: 1.3rem; 
        width: 40px; height: 40px; border-radius: 50%; border: 1px solid #444; 
        display: flex; align-items: center; justify-content: center;
    }
    .social-icons-footer a:hover { color: var(--bg-dark); background: var(--accent-gold); border-color: var(--accent-gold); transform: translateY(-3px); }

    .map-container {
        width: 100%; height: 200px; border-radius: 12px; overflow: hidden;
        border: 1px solid rgba(214, 194, 106, 0.3);
        box-shadow: 0 5px 20px rgba(0,0,0,0.5);
    }
    .map-frame { width: 100%; height: 100%; border: 0; filter: invert(90%) hue-rotate(180deg) brightness(0.9); } 

    .grievance-btn { margin-top: 15px; color: var(--accent-gold) !important; text-decoration: underline !important; font-weight: bold; }
    .copyright { color: #555; margin-top: 50px; font-size: 0.7rem; font-family: var(--font-tech); text-align: center; width: 100%; }

    /* --- MOBILE & TABLET OPTIMIZATION --- */
    @media (max-width: 950px) {
        /* FIX GAP: Remove full viewport height forcing on mobile */
        section { 
            padding: 60px 20px; 
            min-height: auto !important;
            display: flex;
            flex-direction: column;
        }

        .section-layout { flex-direction: column !important; gap: 30px; width: 100%; }
        
        /* FIX CENTERING: Force all Perch Zones (Headings) to be centered */
        .layout-content-right .perch-zone, 
        .layout-content-left .perch-zone,
        .events-header .perch-zone { 
            width: 100%; 
            text-align: center !important; 
            padding: 0; 
            order: 1; 
            margin-bottom: 10px; 
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
        }
        
        .layout-content-right .content-zone, .layout-content-left .content-zone { width: 100%; order: 2; }
        
        .perch-title { font-size: 2.5rem; text-align: center; }
        .perch-subtitle { font-size: 0.8rem; }
        
        /* FIX: Hero Text FONT and SPACING for Mobile */
        .hero-title {
            /* Switch to Syncopate on mobile to ensure visibility (Foldit can be buggy on some OS) */
            font-family: 'Syncopate', sans-serif !important; 
            font-weight: 700;
            font-size: 13vw; 
            display: flex;
            flex-direction: column; 
            align-items: center;
            line-height: 1.1;
            margin-top: 0;
            gap: 10px; /* Space between lines */
            
            /* Ensure color visibility if gradient fails on mobile */
            color: var(--accent-gold);
            background: none !important; 
            -webkit-text-fill-color: var(--accent-gold) !important;
        }
        .word-group { margin: 0; }
        
        /* HERO MOBILE POSITIONING */
        #hero {
            padding-top: 45vh; /* Keep text reasonable on mobile */
            padding-bottom: 50px;
            min-height: 90vh !important;
        }
        
        .hero-date { font-size: 2rem; letter-spacing: 2px; }

        /* Origami & Text Adjustments */
        .origami-sheet { padding: 30px 20px; }
        .sheet-content h3 { font-size: 1.5rem; }
        .sheet-content p { font-size: 1rem; }
        .chat-question { width: 100%; text-align: center; padding: 15px; font-size: 1rem; border-radius: 20px; }
        
        /* Marquee Mobile */
        .image-marquee-item { width: 70vw; height: 200px; }
        .image-marquee-container { 
            width: 120%; 
            margin-left: -10%; 
            transform: rotate(0) scale(1);
        } 
        #memories .content-zone {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        #memories .perch-title {
            font-family: var(--font-fold); /* Revert to original mobile font */
        }
        
        /* Carousel Mobile */
        .events-header {
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }
        .carousel-stage { height: 450px; width: 100%; overflow: visible; }
        .carousel-card-3d { width: 80vw; height: 400px; max-width: 320px; }
        .card-number { font-size: 3rem; }
        .card-title { font-size: 1.5rem; }
        
        /* Team Mobile */
        .team-content-wrapper { padding: 30px 20px; text-align: center; }
        .team-text { font-size: 1rem; }
        
        /* Hero Mobile */
        .hero-countdown { gap: 10px; }
        .time-block { padding: 10px; min-width: 60px; }
        .time-block span { font-size: 1.8rem; }
        
        /* Footer Mobile */
        .footer-logo { font-size: 18vw; margin-bottom: 30px; }
        .footer-grid { grid-template-columns: 1fr; gap: 40px; text-align: center; }
        .footer-col { display: flex; flex-direction: column; align-items: center; }
        .social-icons-footer { justify-content: center; }
        .map-container { height: 250px; width: 100%; }
        .footer-section { padding-top: 40px; }
    }
</style>
</head>
<body>

<!-- 1. BACKGROUND CANVAS -->
<canvas id="animated-bg"></canvas>
<div id="bg-overlay"></div>

<!-- 2. WEBGL FOREGROUND -->
<canvas id="webgl"></canvas>

<!-- 3. CONTENT -->
<main id="smooth-wrapper">
    <section id="hero">
        <div class="hero-content">
            <h1 class="hero-title">
                <span class="word-group"><span class="letter">F</span><span class="letter">L</span><span class="letter">A</span><span class="letter">M</span><span class="letter">E</span><span class="letter">S</span></span>
                <!-- FIX: Split IN and EVERY to ensure spacing on mobile -->
                <span class="word-group"><span class="letter">I</span><span class="letter">N</span></span>
                <span class="word-group"><span class="letter">E</span><span class="letter">V</span><span class="letter">E</span><span class="letter">R</span><span class="letter">Y</span></span>
                <span class="word-group"><span class="letter">F</span><span class="letter">O</span><span class="letter">L</span><span class="letter">D</span></span>
            </h1>
            <h2 class="hero-date"><span class="date-char">M</span><span class="date-char">A</span><span class="date-char">R</span><span class="date-char">C</span><span class="date-char">H</span><span class="date-char"> </span><span class="date-char">1</span><span class="date-char">3</span><span class="date-char"> </span><span class="date-char">-</span><span class="date-char"> </span><span class="date-char">1</span><span class="date-char">5</span></h2>
            
            <div id="countdown" class="hero-countdown">
                <div class="time-block glass-panel"><span id="days">00</span><span class="label">Days</span></div>
                <div class="time-block glass-panel"><span id="hours">00</span><span class="label">Hrs</span></div>
                <div class="time-block glass-panel"><span id="minutes">00</span><span class="label">Min</span></div>
                <div class="time-block glass-panel"><span id="seconds">00</span><span class="label">Sec</span></div>
            </div>
        </div>
    </section>

    <!-- SECTION 1: ABOUT ISHYA -->
    <section id="about-ishya">
        <div class="section-layout layout-content-right">
            <div class="perch-zone">
                <h2 class="perch-title">THE<br>ORIGIN</h2>
                <div class="perch-subtitle">WHERE IT ALL BEGAN</div>
            </div>
            <div class="content-zone">
                <div class="dialogue-wrapper">
                    <div class="chat-question glass-panel">WHAT IS ISHYA?</div>
                    <div class="origami-answer-container">
                        <div class="origami-sheet" id="paper-sheet">
                            <div class="sheet-content">
                                <h3>LEGACY</h3>
                                <p><strong>Ishya</strong> is the annual cultural fest of <strong>IISER Thiruvananthapuram</strong> which, since her inception in 2010, has set stage to nurture imagination and nourish originality.</p>
                                <p>Staying true to her name, Ishya flows with the advent of spring in April, when life blooms from the earth.</p>
                                <p>We have been flying for the past sixteen years, higher each time, from inspiring minds and blossoming creativity to spreading smiles and instilling hope.</p>
                                <p>Ishya is made possible every year with the hardwork and dedication of its organizers, participants and support from sponsors.</p>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 2: MEMORIES -->
    <section id="memories">
        <div class="section-layout">
            <div class="content-zone">
                <div class="image-marquee-container glass-panel">
                    <div class="image-marquee-track">
                        <!-- Repeated images for smooth loop -->
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1514525253440-b393452e8d26?w=500&q=60" loading="lazy" alt="Confetti at a concert"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1470229722913-7c0d2dbbafd3?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1533174072545-e8d4aa97edf9?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1492684223066-81342ee5ff30?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1459749411177-287ce51261df?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1514525253440-b393452e8d26?w=500&q=60" loading="lazy" alt="Confetti at a concert"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1470229722913-7c0d2dbbafd3?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1501281668745-f7f57925c3b4?w=500&q=60" loading="lazy"></div>
                        <div class="image-marquee-item"><img src="https://images.unsplash.com/photo-1533174072545-e8d4aa97edf9?w=500&q=60" loading="lazy"></div>
                    </div>
                </div>
                <div style="text-align: center;"><a href="#" class="cta-btn">VIEW GALLERY</a></div>
            </div>
             <!-- Title moved to right to prevent overlap -->
             <div class="perch-zone" style="text-align: right; padding-left: 50px;">
                <h2 class="perch-title">TIME<br>CAPSULE</h2>
                <div class="perch-subtitle">MOMENTS FROZEN</div>
            </div>
        </div>
    </section>

    <!-- SECTION 3: EVENTS (3D CAROUSEL) -->
    <section id="events" class="events-3d-section">
        <div class="events-header">
            <div class="perch-zone">
                <h2 class="perch-title">THE<br>EVENTS</h2>
                <div class="perch-subtitle">COMPETE & CONQUER</div>
            </div>
            <div class="carousel-nav">
                <button id="prevBtn" class="nav-btn"><i class="fa-solid fa-arrow-left"></i></button>
                <button id="nextBtn" class="nav-btn"><i class="fa-solid fa-arrow-right"></i></button>
            </div>
        </div>
        <div class="carousel-stage">
            <div class="carousel-container" id="cardCarousel"></div>
        </div>
        <!-- UPDATED: EXPLORE MORE BUTTON -->
        <div style="text-align: center; margin-top: 30px; z-index: 5;">
            <a href="#" class="cta-btn">EXPLORE MORE</a>
        </div>
    </section>

    <!-- SECTION 4: TEAM -->
    <section id="team">
        <div class="section-layout layout-content-left">
            <div class="perch-zone">
                <h2 class="perch-title">THE<br>CREW</h2>
                <div class="perch-subtitle">BEHIND THE SCENES</div>
            </div>
            <div class="content-zone">
                <div class="team-content-wrapper glass-panel">
                    <div class="team-text">
                        <h3 class="team-anim-text" style="font-family: var(--font-display); color: var(--accent-gold); font-size: 2rem; margin-bottom: 25px;">MEET THE TEAM</h3>
                        <p class="team-anim-text">Behind every unforgettable moment at <span class="team-highlight">ISHYA</span>, there’s a passionate team bringing magic to life! From curating electrifying performances to crafting immersive experiences, we are a group of dedicated dreamers, artists, and organizers.</p>
                        <p class="team-anim-text">With months of planning, late-night brainstorming, and an unshakable love for arts, we’re here to make ISHYA a celebration to remember.</p>
                        <div class="team-anim-text"><a href="#" class="cta-btn" style="margin-top: 25px;">VIEW MEMBERS</a></div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- SECTION 5: PROSHOWS -->
    <section id="proshows">
        <div class="section-layout layout-content-left">
            <div class="perch-zone">
                <h2 class="perch-title">PROSHOW</h2>
                <div class="perch-subtitle">THE GRAND FINALE</div>
            </div>
            <div class="content-zone">
                <div class="proshow-container">
                    <div class="wait-see-wrapper">
                        <div class="wait-see-text">WAIT AND SEE</div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- FOOTER -->
    <footer class="footer-section">
        <div class="footer-content">
            <h2 class="footer-logo">ISHYA</h2>
            
            <div class="footer-grid">
                <!-- Column 1: Address -->
                <div class="footer-col">
                    <h4>LOCATION</h4>
                    <p>IISER Thiruvananthapuram,<br>
                    Maruthamala PO, Vithura,<br>
                    Thiruvananthapuram - 695551,<br>
                    Kerala, India.</p>
                </div>

                <!-- Column 2: Contact & Socials -->
                <div class="footer-col">
                    <h4>CONTACT US</h4>
                    <p>+91 97476 36164</p>
                    <p>ishya@iisertvm.ac.in</p>
                    
                    <div class="social-icons-footer">
                        <a href="#" aria-label="Facebook"><i class="fa-brands fa-facebook-f"></i></a>
                        <a href="#" aria-label="Instagram"><i class="fa-brands fa-instagram"></i></a>
                        <a href="#" aria-label="X (Twitter)"><i class="fa-brands fa-x-twitter"></i></a>
                        <a href="#" aria-label="YouTube"><i class="fa-brands fa-youtube"></i></a>
                    </div>

                    <div style="margin-top: 20px;">
                        <p style="font-size: 0.8rem; color: #888;">Facing Any Problems?</p>
                        <a href="#" class="grievance-btn">Grievance Redressal</a>
                    </div>
                </div>

                <!-- Column 3: Google Map -->
                <div class="footer-col">
                    <h4>FIND US</h4>
                    <div class="map-container">
                        <iframe class="map-frame" src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d3941.6263884346857!2d77.15933807584109!3d8.677098491371813!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x3b05bbfeb5076e73%3A0x633d994e775f0376!2sIndian%20Institute%20of%20Science%20Education%20and%20Research%20Thiruvananthapuram%20(IISER%20TVM)!5e0!3m2!1sen!2sin!4v1714412345678!5m2!1sen!2sin" allowfullscreen="" loading="lazy" referrerpolicy="no-referrer-when-downgrade"></iframe>
                    </div>
                </div>
            </div>

            <p class="copyright">© 2026 ISHYA. FLAMES IN EVERY FOLD.</p>
        </div>
    </footer>
</main>

<!-- WEBGL 3D SHADERS -->
<script type="x-shader/x-vertex" id="vParticles">
    attribute float aRandom; attribute vec3 targetPos; uniform float uTime; uniform float uProgress; uniform float uExplode; uniform float uParticleOpacity; varying vec3 vColor; varying float vOpacity;
    vec3 mod289(vec3 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec2 mod289(vec2 x) { return x - floor(x * (1.0 / 289.0)) * 289.0; } vec3 permute(vec3 x) { return mod289(((x*34.0)+1.0)*x); }
    float snoise(vec2 v) { const vec4 C = vec4(0.211324865405187, 0.366025403784439, -0.577350269189626, 0.024390243902439); vec2 i  = floor(v + dot(v, C.yy) ); vec2 x0 = v - i + dot(i, C.xx); vec2 i1; i1 = (x0.x > x0.y) ? vec2(1.0, 0.0) : vec2(0.0, 1.0); vec4 x12 = x0.xyxy + C.xxzz; x12.xy -= i1; i = mod289(i); vec3 p = permute( permute( i.y + vec3(0.0, i1.y, 1.0 )) + i.x + vec3(0.0, i1.x, 1.0 )); vec3 m = max(0.5 - vec3(dot(x0,x0), dot(x12.xy,x12.xy), dot(x12.zw,x12.zw)), 0.0); m = m*m; m = m*m; vec3 x = 2.0 * fract(p * C.www) - 1.0; vec3 h = abs(x) - 0.5; vec3 ox = floor(x + 0.5); vec3 a0 = x - ox; m *= 1.79284291400159 - 0.85373472095314 * ( a0*a0 + h*h ); vec3 g; g.x  = a0.x  * x0.x  + h.x  * x0.y; g.yz = a0.yz * x12.xz + h.yz * x12.yw; return 130.0 * dot(m, g); }
    
    void main() { 
        vec3 firePos = position; 
        float t = uTime * 1.0; 
        float noise = snoise(vec2(firePos.x * 0.5, t + firePos.y * 0.2)); 
        firePos.y += mod(t * (3.0 + aRandom), 18.0); 
        if(firePos.y > 7.0) firePos.y -= 18.0; 
        firePos.x += noise * 1.5 * (0.5 + firePos.y * 0.1); 
        float progress = smoothstep(0.0, 1.0, uProgress); 
        vec3 pos = mix(firePos, targetPos, progress); 
        vec3 cFire = mix(vec3(0.24, 0.26, 0.14), vec3(0.3, 0.56, 0.28), aRandom); 
        vec3 cLogo = mix(vec3(0.84, 0.76, 0.41), vec3(0.3, 0.56, 0.28), aRandom);
        vColor = mix(cFire, cLogo, progress); 
        if(uExplode > 0.0) { pos += normalize(pos) * uExplode * 60.0; vColor *= (1.0 - uExplode); } 
        vOpacity = uParticleOpacity; 
        vec4 mvPosition = modelViewMatrix * vec4(pos, 1.0); 
        gl_Position = projectionMatrix * mvPosition; 
        gl_PointSize = (4.0 + aRandom * 3.0) * (20.0 / -mvPosition.z); 
    }
</script>
<script type="x-shader/x-fragment" id="fParticles">
    varying vec3 vColor; varying float vOpacity;
    void main() { if(length(gl_PointCoord - vec2(0.5)) > 0.5) discard; float alpha = (1.0 - smoothstep(0.4, 0.5, length(gl_PointCoord - vec2(0.5)))) * vOpacity; gl_FragColor = vec4(vColor, alpha); }
</script>

<!-- MAIN LOGIC -->
<script type="module">
    import * as THREE from 'https://esm.sh/three@0.160.0';
    import gsap from 'https://esm.sh/gsap@3.12.5';
    import ScrollTrigger from 'https://esm.sh/gsap@3.12.5/ScrollTrigger';
    import Lenis from 'https://esm.sh/@studio-freight/lenis@1.0.33';

    gsap.registerPlugin(ScrollTrigger);
    
    // DETECTION FOR OPTIMIZATION
    const isMobile = /Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent) || window.innerWidth < 950;

    // OPTIMIZED CONFIGURATION FOR MOBILE
    const CONFIG = { 
        LOGO_PATH: 'logo.png', 
        // Increase step to reduce particles (Higher number = fewer particles)
        PARTICLE_DENSITY: isMobile ? 18 : 8, 
        LOGO_SCALE: isMobile ? 7 : 12, 
        LOGO_Y_OFFSET: 1.8 
    };

    const canvas = document.getElementById('webgl'); 
    const renderer = new THREE.WebGLRenderer({ canvas, antialias: !isMobile, alpha: true }); 
    renderer.setSize(window.innerWidth, window.innerHeight); 
    // Limit pixel ratio on mobile to 1 to prevent lag
    renderer.setPixelRatio(isMobile ? 1 : Math.min(window.devicePixelRatio, 2)); 
    renderer.setClearColor(0x000000, 0);

    const scene = new THREE.Scene(); 
    const camera = new THREE.PerspectiveCamera(45, window.innerWidth / window.innerHeight, 0.1, 100); 
    camera.position.set(0, 0, 16); 
    const clock = new THREE.Clock(); 

    function loadAndProcessLogo(url) { 
        return new Promise((resolve) => { 
            const img = new Image(); img.crossOrigin = "Anonymous"; img.src = url; 
            img.onload = () => { 
                const w = 1024; const h = 1024; const c = document.createElement('canvas'); c.width = w; c.height = h; 
                const ctx = c.getContext('2d'); ctx.drawImage(img, 0, 0, w, h); 
                const pixels = ctx.getImageData(0,0,w,h).data; const points = []; 
                for (let y = 0; y < h; y += CONFIG.PARTICLE_DENSITY) { 
                    for (let x = 0; x < w; x += CONFIG.PARTICLE_DENSITY) { 
                        if (pixels[(y * w + x) * 4 + 3] > 128) points.push( (x / w - 0.5) * CONFIG.LOGO_SCALE, (-(y / h - 0.5) * CONFIG.LOGO_SCALE) + CONFIG.LOGO_Y_OFFSET, 0 ); 
                    } 
                } 
                const texture = new THREE.CanvasTexture(c);
                texture.minFilter = THREE.LinearFilter; 
                resolve({ texture: texture, points: new Float32Array(points) }); 
            }; 
            img.onerror = () => { 
                const w = 512; const h = 512; const c = document.createElement('canvas'); c.width = w; c.height = h; const ctx = c.getContext('2d');
                ctx.font = "bold 100px sans-serif"; ctx.fillStyle="white"; ctx.textAlign="center"; ctx.fillText("ISHYA", w/2, h/2);
                const points = []; for(let i=0; i<1000; i++) points.push((Math.random()-0.5)*5, (Math.random()-0.5)*5 + 1.8, 0);
                resolve({ texture: new THREE.CanvasTexture(c), points: new Float32Array(points) }); 
            }; 
        }); 
    }

    let birdMaterial;

    loadAndProcessLogo(CONFIG.LOGO_PATH).then((data) => { 
        const particles = createParticles(data.points.length / 3, data.points);
        const solidLogo = createSolidLogo(data.texture); 
        const bird = createBird();
        if (!isMobile) setupLights(); // Skip heavy lights on mobile if possible, or keep simple
        setupAnimations(particles, solidLogo, bird);
        setupEventListeners();
        setupInteractiveElements();
        
        init3DCarousel(); 

        const animate = () => { 
            const t = clock.getElapsedTime(); 
            particles.material.uniforms.uTime.value = t; 
            if (!isMobile && bird.group.visible) { const flap = Math.sin(t * 8); bird.wingL.rotation.z = flap * 0.4 + 0.1; bird.wingR.rotation.z = -flap * 0.4 - 0.1; } 
            renderer.render(scene, camera); requestAnimationFrame(animate); 
        };
        animate();
    });

    function createParticles(count, targetData) { 
        const pGeo = new THREE.BufferGeometry(); const initialPosArr = new Float32Array(count * 3); const randArr = new Float32Array(count); 
        for (let i = 0; i < count; i++) { initialPosArr[i * 3] = (Math.random() - 0.5) * 4; initialPosArr[i * 3 + 1] = -8 + (Math.random() * 4); initialPosArr[i * 3 + 2] = (Math.random() - 0.5) * 4; randArr[i]=Math.random(); } 
        pGeo.setAttribute('position', new THREE.BufferAttribute(initialPosArr, 3)); pGeo.setAttribute('targetPos', new THREE.BufferAttribute(targetData, 3)); pGeo.setAttribute('aRandom', new THREE.BufferAttribute(randArr, 1)); 
        const pMat = new THREE.ShaderMaterial({ vertexShader: document.getElementById('vParticles').textContent, fragmentShader: document.getElementById('fParticles').textContent, uniforms: { uTime: { value: 0 }, uProgress: { value: 0 }, uExplode: { value: 0 }, uParticleOpacity: { value: 1.0 } }, transparent: true, blending: THREE.AdditiveBlending, depthWrite: false }); 
        const ps = new THREE.Points(pGeo, pMat); scene.add(ps); return ps; 
    }

    function createSolidLogo(texture) { 
        const material = new THREE.MeshBasicMaterial({ map: texture, transparent: true, opacity: 0 }); 
        const logoMesh = new THREE.Mesh(new THREE.PlaneGeometry(CONFIG.LOGO_SCALE, CONFIG.LOGO_SCALE), material); 
        logoMesh.position.set(0, CONFIG.LOGO_Y_OFFSET, 0.1); 
        scene.add(logoMesh); return logoMesh; 
    }

    function createBird() {
        // OPTIMIZATION: Use MeshBasicMaterial (Fastest) on Mobile
        if (isMobile) {
            birdMaterial = new THREE.MeshBasicMaterial({ color: 0xD6C26A, side: THREE.DoubleSide });
        } else {
            birdMaterial = new THREE.MeshStandardMaterial({ color: 0xD6C26A, roughness: 0.3, metalness: 0.8, side: THREE.DoubleSide });
        }
        
        const group = new THREE.Group(); group.visible = false; scene.add(group);
        
        const vBody=[0,0,1,1,0,0,0,0,-1,0,0,1,0,0,-1,-1,0,0,0,0.8,-0.2,0,0,1,1,0,0,0,0.8,-0.2,-1,0,0,0,0,1,0,0.8,-0.2,1,0,0,0,0,-1,0,0.8,-0.2,0,0,-1,-1,0,0,0,0,1,0.15,0,0.8,0,2.5,2.0,0,0,1,0,2.5,2.0,-0.15,0,0.8,0,2.5,2.0,0.1,2.2,2.0,0,1.8,2.5,0,2.5,2.0,0,1.8,2.5,-0.1,2.2,2.0,0,0,-1,0.15,0,-0.8,0,2.0,-2.5,0,0,-1,0,2.0,-2.5,-0.15,0,-0.8];
        const vWing=[0,0,0.8,0,0,-0.8,3.5,1.5,0,0,0,0.8,3.5,1.5,0,0,0.8,-0.2];
        
        const bGeo=new THREE.BufferGeometry(); bGeo.setAttribute('position', new THREE.Float32BufferAttribute(vBody,3)); bGeo.computeVertexNormals();
        const wGeo=new THREE.BufferGeometry(); wGeo.setAttribute('position', new THREE.Float32BufferAttribute(vWing,3)); wGeo.computeVertexNormals();
        
        group.add(new THREE.Mesh(bGeo, birdMaterial));
        const wingL=new THREE.Mesh(wGeo, birdMaterial); wingL.position.set(-0.9,0,0); wingL.scale.x=-1; 
        const wingR=new THREE.Mesh(wGeo, birdMaterial); wingR.position.set(0.9,0,0);
        group.add(wingL, wingR); group.rotation.x=0.2; 
        
        // Add a simple light directly to bird group for mobile so it's always lit
        if(!isMobile) {
            const birdLight = new THREE.PointLight(0xD6C26A, 1.5, 15);
            birdLight.position.set(0, 0.5, 0);
            group.add(birdLight);
        }

        return { group, wingL, wingR };
    }

    function setupLights() { 
        scene.add(new THREE.AmbientLight(0xffffff, 0.4)); 
        const spot = new THREE.SpotLight(0xD6C26A, 2.0); 
        spot.position.set(5, 10, 5); 
        scene.add(spot); 
        const back = new THREE.DirectionalLight(0x4D8F48, 1.2); 
        back.position.set(-5, 5, -5); 
        scene.add(back); 
    }

    function setupAnimations(particles, solidLogo, bird) {
        const pMat = particles.material; const sMat = solidLogo.material;
        gsap.fromTo('main', { opacity: 0 }, { opacity: 1, duration: 2, ease: "power2.out", delay: 0.5 });
        const introTl = gsap.timeline({delay: 0.5, onComplete: () => {gsap.to(".hero-countdown", {opacity:1, duration:1})} });
        
        introTl.to(pMat.uniforms.uProgress, { value: 1.0, duration: 4.0, ease: "power2.inOut" })
               .to(pMat.uniforms.uParticleOpacity, { value: 0, duration: 0.8 }, "-=1.0")
               .to(sMat, { opacity: 1, duration: 0.8 }, "<") 
               .fromTo(gsap.utils.toArray('.hero-title .letter'), { opacity: 0, rotationX: -95, scaleY: 0, transformOrigin: "50% 100%" }, { opacity: 1, rotationX: 0, scaleY: 1, duration: 1.5, ease: "elastic.out(1, 0.6)", stagger: 0.04 }, "<+0.2")
               .fromTo(gsap.utils.toArray('.hero-date .date-char'), { opacity: 0, rotationX: 95, scaleY: 0, transformOrigin: "50% 0%" }, { opacity: 1, rotationX: 0, scaleY: 1, duration: 1.2, ease: "back.out(1.7)", stagger: 0.03 }, "<+0.1");

        const birdScale = isMobile ? 0.6 : 1;

        const heroTl = gsap.timeline({ scrollTrigger: { trigger: "#hero", start: "top top", end: "bottom top", scrub: 1 }});
        heroTl.to(sMat, { opacity: 0, duration: 0.1 }) 
              .to(pMat.uniforms.uParticleOpacity, { value: 1, duration: 0.1 }, "<")
              .to(pMat.uniforms.uExplode, { value: 1, duration: 1 });

        gsap.fromTo("#paper-sheet",
            { opacity: 0, rotationX: 90, transformOrigin: "top center", z: -200 },
            { scrollTrigger: { trigger: "#about-ishya", start: "top 60%", end: "center center", toggleActions: "play none none reverse" },
              opacity: 1, rotationX: 0, z: 0, duration: 1.5, ease: "elastic.out(1, 0.5)" }
        );

        gsap.timeline({ scrollTrigger: { trigger: "#team", start: "top 70%", toggleActions: "play none none reverse" } })
            .to(".team-content-wrapper", { opacity: 1, duration: 0.8 })
            .from(".team-anim-text", { y: 30, opacity: 0, duration: 0.8, stagger: 0.2, ease: "power2.out" }, "<");
        
        // FIX: Remove bird animation on mobile
        if (!isMobile) {
            heroTl.call(() => { bird.group.visible = true; }, null, "<0.1") 
                  .fromTo(bird.group.scale, {x:0, y:0, z:0}, {x:birdScale, y:birdScale, z:birdScale, duration: 0.8}, "<");

            gsap.timeline({ scrollTrigger: { trigger: "#about-ishya", start: "top bottom", end: "center center", scrub: 1.5 }})
                .to(bird.group.position, { x: -6, y: -0.5, z: 2 })
                .to(bird.group.rotation, { y: -0.5, x: 0.2, z: 0 }, "<");

            gsap.timeline({ scrollTrigger: { trigger: "#memories", start: "top bottom", end: "center center", scrub: 1.5 }})
                .to(bird.group.position, { x: 6, y: 0, z: 0 })
                .to(bird.group.rotation, { y: 0.6, x: 0.1, z: 0 }, "<");

            gsap.timeline({ scrollTrigger: { trigger: "#events", start: "top bottom", end: "center center", scrub: 1.5 }})
                .to(bird.group.position, { x: -5.5, y: -0.5, z: 1 })
                .to(bird.group.rotation, { y: -0.6, x: 0.1, z: 0 }, "<");

            gsap.timeline({ scrollTrigger: { trigger: "#team", start: "top bottom", end: "center center", scrub: 1.5 }})
                .to(bird.group.position, { x: 6, y: 0.5, z: 1 })
                .to(bird.group.rotation, { y: 0.6, x: 0.1, z: 0 }, "<");

            gsap.timeline({ scrollTrigger: { trigger: "#proshows", start: "top bottom", end: "center center", scrub: 1.5 }})
                .to(bird.group.position, { x: 0, y: 0, z: 3 })
                .to(bird.group.rotation, { y: 0, x: 0, z: 0 }, "<"); 
        }
    }

    // --- 3D CAROUSEL LOGIC ---
    function init3DCarousel() {
        const container = document.getElementById('cardCarousel');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');

        const eventsData = [
            { id: '01', title: 'MUDHRA', cat: 'CLASSICAL DANCE', img: 'https://images.unsplash.com/photo-1543857778-c4a1a3e0b2eb?w=500&q=80' },
            { id: '02', title: 'RHAPSODY', cat: 'BATTLE OF BANDS', img: 'https://images.unsplash.com/photo-1501612780327-45045538702b?w=500&q=80' },
            { id: '03', title: 'PANACHE', cat: 'FASHION SHOW', img: 'https://images.unsplash.com/photo-1509631179647-0177331693ae?w=500&q=80' },
            { id: '04', title: 'THEATRIX', cat: 'THEATRE DRAMA', img: 'https://images.unsplash.com/photo-1519074069444-1ba4fff66d16?w=500&q=80' },
            { id: '05', title: 'CANVAS', cat: 'FINE ARTS', img: 'https://images.unsplash.com/photo-1475721027767-4d0637c054e9?w=500&q=80' },
            { id: '06', title: 'QUIZ', cat: 'LITERATURE', img: 'https://images.unsplash.com/photo-1551632811-561732d1e306?w=500&q=80' },
            { id: '07', title: 'STEP UP', cat: 'SOLO DANCE', img: 'https://images.unsplash.com/photo-1550977186-c4582f219a4c?w=500&q=80' }
        ];

        let activeIndex = 0; 
        const cardElements = [];

        eventsData.forEach((item, index) => {
            const card = document.createElement('div');
            card.className = 'carousel-card-3d glass-panel';
            card.innerHTML = `
                <img src="${item.img}" class="card-bg-img" alt="${item.title}">
                <div class="card-content">
                    <div>
                        <div class="card-number">${item.id}</div>
                        <i class="fa-solid fa-arrow-up card-arrow-icon"></i>
                    </div>
                    <div class="card-details">
                        <div class="card-cat">${item.cat}</div>
                        <div class="card-title">${item.title}</div>
                    </div>
                </div>
            `;
            card.addEventListener('click', () => { if (activeIndex !== index) { activeIndex = index; updateCarousel(); } });
            container.appendChild(card);
            cardElements.push(card);
        });

        function updateCarousel() {
            const scaleIntensity = 0.15; 
            const xDistance = isMobile ? 40 : 250; 
            const rotationIntensity = 25; 
            const depthIntensity = 200; 

            cardElements.forEach((card, index) => {
                const offset = index - activeIndex;
                const absOffset = Math.abs(offset);
                
                if (absOffset > 3) {
                    gsap.to(card, { opacity: 0, duration: 0.3, pointerEvents: 'none' });
                } else {
                    const zIndex = 100 - absOffset;
                    const scale = 1 - (absOffset * scaleIntensity);
                    const rotateY = offset * -rotationIntensity; 
                    const translateX = offset * xDistance; 
                    const translateZ = -absOffset * depthIntensity;
                    const opacity = 1 - (absOffset * 0.3);

                    if (offset === 0) card.classList.add('active-card');
                    else card.classList.remove('active-card');

                    gsap.to(card, { x: translateX, z: translateZ, rotateY: rotateY, scale: scale, opacity: opacity, zIndex: zIndex, duration: 0.8, ease: "power2.out", pointerEvents: 'auto' });
                }
            });
        }

        nextBtn.addEventListener('click', () => { if (activeIndex < eventsData.length - 1) { activeIndex++; updateCarousel(); } });
        prevBtn.addEventListener('click', () => { if (activeIndex > 0) { activeIndex--; updateCarousel(); } });

        let touchStartX = 0;
        container.addEventListener('touchstart', e => touchStartX = e.changedTouches[0].screenX, {passive: true});
        container.addEventListener('touchend', e => {
            const touchEndX = e.changedTouches[0].screenX;
            if (touchStartX - touchEndX > 50) nextBtn.click(); 
            if (touchEndX - touchStartX > 50) prevBtn.click(); 
        }, {passive: true});
        updateCarousel();
    }

    function setupInteractiveElements() {
        const targetDate = new Date("March 13, 2026 00:00:00").getTime();
        setInterval(() => {
            const now = new Date().getTime(); const distance = targetDate - now; 
            if (distance > 0) {
                document.getElementById('days').innerText = Math.floor(distance / (1000 * 60 * 60 * 24)).toString().padStart(2, '0');
                document.getElementById('hours').innerText = Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60)).toString().padStart(2, '0');
                document.getElementById('minutes').innerText = Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60)).toString().padStart(2, '0');
                document.getElementById('seconds').innerText = Math.floor((distance % (1000 * 60)) / 1000).toString().padStart(2, '0');
            }
        }, 1000);
    }

    function setupEventListeners() {
        const lenis = new Lenis({ lerp: 0.1, smooth: true });
        function raf(time) { lenis.raf(time); requestAnimationFrame(raf); } requestAnimationFrame(raf);
        let resizeTimeout;
        window.addEventListener('resize', () => { clearTimeout(resizeTimeout); resizeTimeout = setTimeout(() => { camera.aspect = window.innerWidth / window.innerHeight; camera.updateProjectionMatrix(); renderer.setSize(window.innerWidth, window.innerHeight); }, 100); });
    }
</script>   

<!-- OPTIMIZED GREEN BACKGROUND ANIMATION -->
<script>
    document.addEventListener('DOMContentLoaded', () => {
        const canvas = document.getElementById('animated-bg');
        if (!canvas) return;
        const ctx = canvas.getContext('2d');
        let width, height;
        
        // DETECTION
        const isMobile = window.innerWidth < 950;

        const COLORS = { bg: 'rgba(5, 20, 8, 1)', trail: 'rgba(5, 20, 8, 0.08)', swirlGreen: 'rgba(77, 183, 72, 0.2)', swirlDark: 'rgba(30, 50, 20, 0.3)', gold: 'rgba(214, 194, 106, 0.4)', mandala: 'rgba(214, 194, 106, 0.15)' };
        
        // Massive reduction of particles on mobile
        const particles = []; 
        const numParticles = isMobile ? 40 : 600; 
        const noiseScale = 0.002; 
        let mandalas = [];

        function resize() {
            width = canvas.width = window.innerWidth; height = canvas.height = window.innerHeight;
            ctx.fillStyle = COLORS.bg; ctx.fillRect(0, 0, width, height);
            
            // Disable complex mandalas on mobile
            if (!isMobile) {
                mandalas = [new Mandala(width, 0, width * 0.3, -0.002, COLORS.mandala), new Mandala(0, height, width * 0.35, 0.0015, COLORS.mandala)];
            } else {
                mandalas = [];
            }
            
            if (particles.length === 0) { for(let i=0; i<numParticles; i++) particles.push(new FlowParticle()); }
        }

        function noise(x, y) { return Math.sin(x) * Math.cos(y); }
        class FlowParticle {
            constructor() { this.x = Math.random() * width; this.y = Math.random() * height; this.speed = Math.random() * 2 + 0.5; this.angle = 0; this.size = Math.random() * 2.5 + 0.5; this.color = Math.random() > 0.9 ? COLORS.gold : (Math.random() > 0.6 ? COLORS.swirlGreen : COLORS.swirlDark); }
            update() { const n = noise(this.x * noiseScale, this.y * noiseScale); this.angle = n * Math.PI * 4; this.x += Math.cos(this.angle) * this.speed; this.y += Math.sin(this.angle) * this.speed; if (this.x < 0) this.x = width; if (this.x > width) this.x = 0; if (this.y < 0) this.y = height; if (this.y > height) this.y = 0; }
            draw() { ctx.fillStyle = this.color; ctx.beginPath(); ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2); ctx.fill(); }
        }
        class Mandala {
            constructor(x, y, radius, speed, color) { this.x = x; this.y = y; this.radius = radius; this.speed = speed; this.angle = 0; this.color = color; }
            update() { this.angle += this.speed; }
            draw() { ctx.save(); ctx.translate(this.x, this.y); ctx.rotate(this.angle); ctx.strokeStyle = this.color; ctx.lineWidth = 1.5; const petals = 12; for (let i = 0; i < petals; i++) { ctx.rotate(Math.PI * 2 / petals); ctx.beginPath(); ctx.moveTo(0, 0); ctx.quadraticCurveTo(this.radius * 0.5, this.radius * 0.5, 0, this.radius); ctx.quadraticCurveTo(-this.radius * 0.5, this.radius * 0.5, 0, 0); ctx.stroke(); ctx.beginPath(); ctx.arc(0, this.radius * 0.7, this.radius * 0.05, 0, Math.PI * 2); ctx.fillStyle = COLORS.gold; ctx.fill(); } ctx.beginPath(); ctx.arc(0, 0, this.radius, 0, Math.PI * 2); ctx.stroke(); ctx.beginPath(); ctx.arc(0, 0, this.radius * 0.9, 0, Math.PI * 2); ctx.stroke(); ctx.restore(); }
        }
        function animate() { 
            ctx.fillStyle = COLORS.trail; 
            ctx.fillRect(0, 0, width, height); 
            if(!isMobile) mandalas.forEach(m => { m.update(); m.draw(); }); 
            particles.forEach(p => { p.update(); p.draw(); }); 
            requestAnimationFrame(animate); 
        }
        window.addEventListener('resize', resize); resize(); animate();
    });
</script>
<!-- SAFETY TIMEOUT: Forces content to show even if 3D crashes -->
<script>
    setTimeout(() => {
        document.querySelector('main').style.opacity = '1';
    }, 1000);
</script>
</body>
</html>
